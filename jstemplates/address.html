<article id="address-id-{{ id }}" class="address" data-id="{{ id }}"{{# latitude }}{{# longitude }} data-latitude="{{ latitude }}" data-longitude="{{ longitude }}"{{/ longitude }}{{/ latitude }}{{# geolat }}{{# geolng }} data-geocode-latitude="{{ geolat }}" data-geocode-longitude="{{ geolng }}"{{/ geolng }}{{/ geolat }}>
  <input type="checkbox" id="select_{{ id }}" name="select" value="{{ id }}" class="item-select"{{# checked }} checked="checked"{{/ checked }}>

  <div class="content">
    <span class="mapkey">{{ index }}</span>
    <label for="select_{{ id }}">
      <h3 class="adr">
        {{# street_is_parsed }}
          <div class="street-address" data-parsed="true">
            <span class="street-number" title="street number">{{ street_number }}</span>
            <span class="street-prefix" title="street prefix">{{ street_prefix }}</span>
            <span class="street-name" title="street name">{{ street_name }}</span>
            <span class="street-type" title="street type">{{ street_type }}</span>
            <span class="street-suffix" title="street suffix">{{ street_suffix }}</span>
          </div>
        {{/ street_is_parsed }}
        {{^ street_is_parsed }}
          <div class="street-address" title="street address">{{ street }}</div>
        {{/ street_is_parsed }}
        <div class="locality" title="city or locality">{{ city }}</div>,
        <div class="region" title="state or region">{{ state }}</div>
        <div class="complex-name" title="complex name">{{ complex_name }}</div>
      </h3>
    </label>

    <div class="id{{^ pl }} unmapped{{/ pl }}{{# pl }}{{^ needs_review }} approved{{/ needs_review }}{{/ pl }}">
      {{# pl }}
        <button class="action-reject" type="submit" title="reject mapping">reject mapping</button>

        <input type="checkbox" name="flag_for_review" value="{{ id }}" id="flag_for_review_{{ id }}"{{# needs_review }} checked="checked"{{/ needs_review }} class="flag">
        <label for="flag_for_review_{{ id }}" class="action-flag">flag for review</label>

        {{# geocoded }}<span class="geocoded">geocoded</span>{{/ geocoded }}

        <label for="select_{{ id }}" class="value{{# invalid_pl }} invalid{{/ invalid_pl }}">{{ pl }}</label>
      {{/ pl }}
      {{^ pl }}
        <label for="select_{{ id }}" class="value">not mapped</label>
      {{/ pl }}
    </div>

    <ul class="controls">
      <li><a href="#" title="edit" class="action-edit" data-url="{{ edit_url }}">edit</a></li>
      <li><a href="#{{! @@@ link to revision history }}" title="history" class="action-history">history</a></li>
      <li><button type="submit" name="delete" value="{{ id }}" title="delete" class="action-delete">delete</button></li>
      <li>
        {{# multi_units }}
          <button name="complex" type="submit" class="action-complex single" value="{{ id }}" title="set as single unit">single unit</button>
        {{/ multi_units }}
        {{^ multi_units }}
          <button name="complex" type="submit" class="action-complex multiple" value="{{ id }}" title="set as multiple units">multiple units</button>
        {{/ multi_units }}
      </li>
    </ul>

    <div class="details">
      <p class="summary action-info" title="show details">details</p>
      <div class="more">

        <p class="notes" title="notes">{{ notes }}</p>

        {{# byline }}
          <div class="byline">
            {{# import_source }}
              <p class="hcard">
                {{# web_ui }}
                Created
                {{/ web_ui }}
                {{^ web_ui }}
                Imported
                {{/ web_ui }}
                {{# imported_by }}
                by <cite class="fn">{{ imported_by }}</cite>
                {{/ imported_by }}
                {{^ web_ui }}
                from <span class="from">{{ import_source }}</span>
                {{/ web_ui }}
                {{# import_timestamp }}
                on <time pubdate>{{ import_timestamp }}</time>
                {{/ import_timestamp }}
              </p>
            {{/ import_source }}

            {{# pl }}
              <p class="hcard">
                Mapped by <cite class="fn">{{ mapped_by }}</cite>
                on <time class="mapped">{{ mapped_timestamp }}</time>
              </p>
            {{/ pl }}
          </div>
        {{/ byline }}
      </div>
    </div>

  </div>
</article>
